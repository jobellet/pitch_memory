<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pitch Discrimination Experiment – Custom Logistic Fit</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Link the external CSS -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<!-- =============== 1. Intro Screen =============== -->
<div id="introScreen" class="screen">
  <div class="centered-content">
    <h1>Pitch Discrimination Experiment</h1>
    <p>
      You will hear two tones in quick succession.<br>
      Decide if the <strong>second tone</strong> is higher (↑) or lower (↓) than the first.<br><br>
      <strong>Test Mode</strong>: Large, fixed difference (12 semitones). You must get 5 consecutive correct to proceed.<br>
      <strong>Real Experiment</strong>:<br>
      - First 50 real trials are sampled uniformly in log space [0.01..1 semitone].<br>
      - Then we fit a logistic curve (~0.5–1 range) to find intervals giving ~70–80% accuracy,<br>
        sampling that range in log space afterwards.<br>
      - Every 10 real trials beyond 50, you will see a <em>Batch End</em> screen to continue or stop.<br>
    </p>
    <button id="startTestBtn">Start Test Mode</button>
    <p>Or upload a previous experiment data file:</p>
    <button id="uploadBtn">Upload Data</button>
    <input type="file" id="fileInput" accept=".json" style="display:none;" />
  </div>
</div>

<!-- =============== 2. Trial Screen =============== -->
<div id="trialScreen" class="screen">
  <div id="trialCounter"></div>
  <div id="horizontalLine"></div>
  <div id="higherArea">HIGHER ↑</div>
  <div id="lowerArea">LOWER ↓</div>
</div>

<!-- =============== 3. Test Complete Screen =============== -->
<div id="testCompleteScreen" class="screen">
  <div class="centered-content">
    <h1>Test Complete!</h1>
    <p>
      You have reached 5 consecutive correct answers in the test trials.<br>
      Now the real experiment will begin.<br>
      The first 50 real trials are random semitones in [0.01..1] (log scale).<br>
      After 50, we will fit a logistic function around ~70–80% accuracy.<br><br>
      Press Enter or click below to continue.
    </p>
    <button id="startRealBtn">Continue</button>
  </div>
</div>

<!-- =============== 4. Batch End Screen =============== -->
<div id="batchEndScreen" class="screen">
  <div class="centered-content">
    <h1>Batch Complete</h1>
    <p>
      You have finished 10 trials in this batch.<br>
      Press <strong>Enter</strong> (or click below) to continue,<br>
      or press <strong>Esc</strong> (or click below) to stop.
    </p>
    <button id="continueBtn">Continue (Enter)</button>
    <button id="stopBtn">Stop (Esc)</button>
  </div>
</div>

<!-- =============== 5. Final Screen =============== -->
<div id="finalScreen" class="screen">
  <div class="centered-content">
    <h1>Experiment Ended</h1>
    <p>Thank you for participating!</p>
    <button id="downloadBtn">Download Data</button>
  </div>
</div>

<!-- =============== Scripts =============== -->
<!-- 1) logistic-fitting code -->
<script src="logisticFit.js"></script>
<!-- 2) main experiment code -->
<script src="main.js"></script>

</body>
</html>
