<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pitch Discrimination Experiment – Empirical Bounds</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Link the external CSS -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<!-- =============== 1. Intro Screen =============== -->
<div id="introScreen" class="screen">
  <div class="centered-content">
    <h1>Pitch Discrimination Experiment</h1>
    <p>
      You will hear two tones in quick succession.<br>
      Decide if the <strong>second tone</strong> is higher (↑) or lower (↓) than the first.<br><br>
      <strong>Test Mode</strong>: Large, fixed difference (12 semitones). You must get 5 consecutive correct to proceed.<br>
      <strong>Real Experiment</strong>:<br>
      - First 50 real trials sample semitone differences uniformly in log space [0.01..2] semitones.<br>
      - After 50 (or if you upload data with ≥50 real trials), we re‐compute the upper/lower bounds based on your performance.<br>
        * If you’re >90% correct above a certain threshold, that becomes the new upper bound (we shrink it).<br>
        * If you’re <60% correct below a certain threshold, that becomes the new lower bound (we raise it).<br>
      - Every 10 real trials beyond 50, you see a <em>Batch End</em> screen to continue or stop.<br>
    </p>
    <button id="startTestBtn">Start Test Mode</button>
    <p>Or upload a previous experiment data file:</p>
    <button id="uploadBtn">Upload Data</button>
    <input type="file" id="fileInput" accept=".json" style="display:none;" />
  </div>
</div>

<!-- =============== 2. Trial Screen =============== -->
<div id="trialScreen" class="screen">
  <div id="trialCounter"></div>
  <div id="horizontalLine"></div>
  <div id="higherArea">HIGHER ↑</div>
  <div id="lowerArea">LOWER ↓</div>
</div>

<!-- =============== 3. Test Complete Screen =============== -->
<div id="testCompleteScreen" class="screen">
  <div class="centered-content">
    <h1>Test Complete!</h1>
    <p>
      You have reached 5 consecutive correct answers in the test trials.<br>
      Now the real experiment will begin.<br>
      The first 50 real trials sample semitone differences from 0.01..2 (log scale).<br>
      After 50, we adapt bounds to keep you near 60–90% accuracy ranges.<br><br>
      Press Enter or click below to continue.
    </p>
    <button id="startRealBtn">Continue</button>
  </div>
</div>

<!-- =============== 4. Batch End Screen =============== -->
<div id="batchEndScreen" class="screen">
  <div class="centered-content">
    <h1>Batch Complete</h1>
    <p>
      You have finished 10 trials in this batch.<br>
      Press <strong>Enter</strong> (or click below) to continue,<br>
      or press <strong>Esc</strong> (or click below) to stop.
    </p>
    <button id="continueBtn">Continue (Enter)</button>
    <button id="stopBtn">Stop (Esc)</button>
  </div>
</div>

<!-- =============== 5. Final Screen =============== -->
<div id="finalScreen" class="screen">
  <div class="centered-content">
    <h1>Experiment Ended</h1>
    <p>Thank you for participating!</p>
    <button id="downloadBtn">Download Data</button>
  </div>
</div>

<!-- =============== Scripts =============== -->
<script src="adaptiveBounds.js"></script>
<script src="main.js"></script>

</body>
</html>